


SELECT E.BorrowerName,P.CollateralType_Value+' ('+P.collateralID+')',C.CollateralType_Value+' ('+C.collateralID+')',V.CollateralType_Value+' ('+V.collateralID+')' FROM NG_CLOS_EXTTABLE as E,NG_CLOS_PropertyCollateral_Grid as P,NG_CLOS_Collateral_Grid as C,NG_CLOS_Vehicle_Grid as V








SELECT E.BorrowerName,P.CollateralType_Value+' ('+P.collateralID+')',C.CollateralType_Value+' ('+C.collateralID+')',V.CollateralType_Value+' ('+V.collateralID+')' FROM NG_CLOS_EXTTABLE as E with(nolock),NG_CLOS_PropertyCollateral_Grid as P with(nolock),NG_CLOS_Collateral_Grid as C with(nolock),NG_CLOS_Vehicle_Grid as V with(nolock)

where Workitem_Name  in (SELECT CASE_NUMBER FROM NG_CLOS_EXTTABLE with (nolock) WHERE MGroupID=@GID)




select C.CollateralType_Value+' ('+C.collateralID+')',V.CollateralType_Value+' ('+V.collateralID+')' from NG_CLOS_Collateral_Grid as C with(nolock),NG_CLOS_Vehicle_Grid as V with(nolock) 
where Workitem_Name in (SELECT CASE_NUMBER FROM NG_CLOS_EXTTABLE WHERE MGroupID='2')


select CollateralType_Value+' ('+collateralID+')' from NG_CLOS_PropertyCollateral_Grid with(nolock) 
























































IF OBJECT_ID ('dbo.NG_CLOS_GroupScrDetails_Proc') IS NOT NULL
	DROP PROCEDURE dbo.NG_CLOS_GroupScrDetails_Proc
GO

CREATE PROCEDURE NG_CLOS_GroupScrDetails_Proc
(
@winame NVARCHAR(63),
@Name NVARCHAR(100),
@GID Nvarchar(10)
)
AS
BEGIN
IF(@Name='Security')
BEGIN
CREATE TABLE #TempData
    ( 
       BName nvarchar(100)
    ,  SecurityList nvarchar(100)
    )
    INSERT INTO #TempData(Bname)        SELECT BorrowerName  FROM NG_CLOS_EXTTABLE WITH(nolock) WHERE BorrowerName IS NOT NULL AND CASE_NUMBER IN  (SELECT CASE_NUMBER FROM NG_CLOS_EXTTABLE WITH(nolock) WHERE MGroupID=@GID)
    INSERT INTO #TempData(SecurityList) SELECT CollateralType_Value+' ('+collateralID+')' from NG_CLOS_PropertyCollateral_Grid with(nolock) WHERE (CollateralType_Value IS NOT NULL AND collateralID IS NOT NULL) AND WI_Name IN (SELECT CASE_NUMBER FROM NG_CLOS_EXTTABLE WITH(nolock) WHERE MGroupID=@GID)
    INSERT INTO #TempData(SecurityList) SELECT CollateralType_Value+' ('+collateralID+')' FROM NG_CLOS_Collateral_Grid with(nolock) WHERE (CollateralType_Value IS NOT NULL AND collateralID IS NOT NULL) AND Workitem_Name IN (SELECT CASE_NUMBER FROM NG_CLOS_EXTTABLE WITH(nolock) WHERE MGroupID=@GID)
    INSERT INTO #TempData(SecurityList) SELECT CollateralType_Value+' ('+collateralID+')' FROM NG_CLOS_Vehicle_Grid with(nolock) WHERE (CollateralType_Value IS NOT NULL AND collateralID IS NOT NULL) AND Workitem_Name IN (SELECT CASE_NUMBER FROM NG_CLOS_EXTTABLE WITH(nolock) WHERE MGroupID=@GID)
    SELECT * FROM #TempData
END
END
GO

